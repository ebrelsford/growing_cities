{% extends "pages/base.html" %}
{% load fiber_tags %}

{% block page_content %}
<script>
    $(document).ready(function() {
        $('#host-screening-form').load('{% url "screenings:host_screening_form" %}', function() {
            $(document.body).ajaxify();

            $('#host-screening-form form').submit(function() {
                $(this).find(':input[type=submit]').attr('disabled', 'disabled');
                $(this).addClass('submitting');
            });

            // TODO theme this
            $('#id_date').datepicker({
                minDate: 0,
            });

            $('#id_time').timePicker({
                show24Hours: false,
            });
        });

        $('.host-screening-form-show').click(function() {
            $('.host-screening-instructions').slideToggle();
            return false;
        });
    });
</script>

<div class="screenings lead-in">
    {% show_page_content "screenings-lead-in" %}
</div>

<div class="screening-list-wrapper">
    <ul class="screening-list">
    {% for screening in screenings %}
        <li class="screening">
            {% include "screenings/_screening_detail.html" %}
        </li>
    {% endfor %}
    </ul>
    {% if 'add_screening' in perms %}
    <a href="{% url "admin:screenings_screening_add" %}" class="no-ajax">add screening</a>
    {% endif %}
    <div class="clear"></div>
</div>

<div class="host-screening lead-in">
    {% show_page_content "host-screening-lead-in" %}
    <a class="host-screening-form-show action-button action-button-a">Host a screening</a>
</div>
<div class="host-screening-instructions">
    <div class="host-screening-instructions-text">
        {% show_page_content "host-screening-instructions" %}
    </div>
    <div id="host-screening-form" class="ajax-form-wrapper"></div>
</div>
{% endblock %}
