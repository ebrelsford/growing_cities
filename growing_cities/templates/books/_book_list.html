<div class="book-list grid-table">
    {% for book in books %}
        {% cycle 'left' 'middle' 'right' as position silent %}

        {% if position == 'left' %}
        <div class="grid-row count-{{ forloop.counter }}">
        {% endif %}

            <div class="grid-cell grid grid-1-3 {{ position }}">
                {% include "books/_book_detail.html" %}
            </div>

        {% if position == 'right' %}
        </div>
        {% endif %}
    {% endfor %}
</div>
